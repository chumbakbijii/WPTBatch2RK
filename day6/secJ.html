<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Section J - Bootstrap with Event Handling</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.0/font/bootstrap-icons.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f8f9fa;
        }
        .section-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem 0;
            margin-bottom: 2rem;
        }
        .card {
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border: none;
            transition: transform 0.2s;
        }
        .card:hover {
            transform: translateY(-5px);
        }
        .btn-custom {
            background: linear-gradient(45deg, #667eea, #764ba2);
            border: none;
            color: white;
        }
        .btn-custom:hover {
            background: linear-gradient(45deg, #764ba2, #667eea);
            color: white;
        }
        .table-custom {
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .movie-type-badges {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }
        .badge-custom {
            background-color: #667eea;
        }
    </style>
</head>
<body>
<!-- Header Section -->
<div class="section-header text-center">
    <div class="container">
        <h1 class="display-4 mb-3">
            <i class="bi bi-film"></i> Section J - Bootstrap Movie Management
        </h1>
        <p class="lead">Advanced movie management system with Bootstrap styling and event handling</p>
    </div>
</div>

<div class="container">
    <!-- Problem 1: Simple Movie Table with Bootstrap -->
    <div class="row mb-5">
        <div class="col-12">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h2 class="card-title mb-0">
                        <i class="bi bi-table"></i> Problem 1: Simple Movies Table (Bootstrap)
                    </h2>
                </div>
                <div class="card-body">
                    <div class="row mb-3">
                        <div class="col-md-3">
                            <input type="text" class="form-control" id="simpleMovieName" placeholder="Movie Name">
                        </div>
                        <div class="col-md-3">
                            <input type="number" class="form-control" id="simpleMoviePrice" placeholder="Price" step="0.01">
                        </div>
                        <div class="col-md-3">
                            <input type="text" class="form-control" id="simpleMovieSeat" placeholder="Seat Number">
                        </div>
                        <div class="col-md-3">
                            <button class="btn btn-success w-100" onclick="addSimpleMovie()">
                                <i class="bi bi-plus-circle"></i> Add Movie
                            </button>
                        </div>
                    </div>
                    <div class="mb-3">
                        <button class="btn btn-custom" onclick="addThreeSimpleMovies()">
                            <i class="bi bi-plus-square"></i> Add 3 Movies via Prompts
                        </button>
                        <button class="btn btn-outline-danger ms-2" onclick="clearSimpleMovies()">
                            <i class="bi bi-trash"></i> Clear All
                        </button>
                    </div>

                    <div class="table-responsive">
                        <table class="table table-striped table-hover table-custom">
                            <thead class="table-dark">
                            <tr>
                                <th><i class="bi bi-hash"></i> S.No</th>
                                <th><i class="bi bi-film"></i> Movie Name</th>
                                <th><i class="bi bi-currency-dollar"></i> Price</th>
                                <th><i class="bi bi-geo-alt"></i> Seat</th>
                            </tr>
                            </thead>
                            <tbody id="simpleMoviesTableBody">
                            <tr>
                                <td colspan="4" class="text-center text-muted">
                                    <i class="bi bi-inbox"></i> No movies added yet
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Problem 2: Advanced Movie Form with Bootstrap (Compulsory) -->
    <div class="row mb-5">
        <div class="col-12">
            <div class="card">
                <div class="card-header bg-success text-white">
                    <h2 class="card-title mb-0">
                        <i class="bi bi-form-control"></i> Problem 2: Advanced Movie Form (Compulsory)
                    </h2>
                    <p class="card-text mb-0 mt-2">Complete movie management with submit and click events</p>
                </div>
                <div class="card-body">
                    <!-- Advanced Movie Form -->
                    <form id="advancedMovieForm" class="needs-validation" novalidate>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="advancedMovieName" class="form-label">
                                    <i class="bi bi-film"></i> Movie Name *
                                </label>
                                <input type="text" class="form-control" id="advancedMovieName" required>
                                <div class="invalid-feedback">Please provide a movie name.</div>
                            </div>
                            <div class="col-md-6">
                                <label for="advancedMovieActor" class="form-label">
                                    <i class="bi bi-person"></i> Actor *
                                </label>
                                <input type="text" class="form-control" id="advancedMovieActor" required>
                                <div class="invalid-feedback">Please provide an actor name.</div>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="advancedMovieRelease" class="form-label">
                                    <i class="bi bi-calendar"></i> Release Date *
                                </label>
                                <input type="date" class="form-control" id="advancedMovieRelease" required>
                                <div class="invalid-feedback">Please provide a release date.</div>
                            </div>
                            <div class="col-md-6">
                                <label for="advancedMovieShowtime" class="form-label">
                                    <i class="bi bi-clock"></i> Show Time *
                                </label>
                                <input type="datetime-local" class="form-control" id="advancedMovieShowtime" required>
                                <div class="invalid-feedback">Please provide a show time.</div>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label class="form-label">
                                    <i class="bi bi-display"></i> Movie Type (Select multiple) *
                                </label>
                                <div class="form-check">
                                    <input class="form-check-input movie-type-checkbox" type="checkbox" value="2D" id="type2D">
                                    <label class="form-check-label" for="type2D">2D</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input movie-type-checkbox" type="checkbox" value="3D" id="type3D">
                                    <label class="form-check-label" for="type3D">3D</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input movie-type-checkbox" type="checkbox" value="IMAX" id="typeIMAX">
                                    <label class="form-check-label" for="typeIMAX">IMAX</label>
                                </div>
                                <div class="invalid-feedback" id="movieTypeError">Please select at least one movie type.</div>
                            </div>

                            <div class="col-md-6">
                                <label class="form-label">
                                    <i class="bi bi-translate"></i> Language *
                                </label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="language" value="English" id="langEnglish" required>
                                    <label class="form-check-label" for="langEnglish">English</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="language" value="Hindi" id="langHindi" required>
                                    <label class="form-check-label" for="langHindi">Hindi</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="language" value="Spanish" id="langSpanish" required>
                                    <label class="form-check-label" for="langSpanish">Spanish</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="language" value="French" id="langFrench" required>
                                    <label class="form-check-label" for="langFrench">French</label>
                                </div>
                                <div class="invalid-feedback">Please select a language.</div>
                            </div>
                        </div>

                        <div class="row mb-4">
                            <div class="col-12">
                                <button type="submit" class="btn btn-custom btn-lg me-2">
                                    <i class="bi bi-check-lg"></i> Submit Movie (Submit Event)
                                </button>
                                <button type="button" class="btn btn-outline-primary btn-lg me-2" onclick="addAdvancedMovie()">
                                    <i class="bi bi-plus-circle"></i> Add Movie (Click Event)
                                </button>
                                <button type="button" class="btn btn-outline-secondary btn-lg" onclick="resetAdvancedForm()">
                                    <i class="bi bi-arrow-clockwise"></i> Reset Form
                                </button>
                            </div>
                        </div>
                    </form>

                    <!-- Advanced Movies Table -->
                    <div class="table-responsive">
                        <table class="table table-striped table-hover table-custom">
                            <thead class="table-dark">
                            <tr>
                                <th><i class="bi bi-hash"></i> S.No</th>
                                <th><i class="bi bi-film"></i> Movie Name</th>
                                <th><i class="bi bi-person"></i> Actor</th>
                                <th><i class="bi bi-calendar"></i> Release Date</th>
                                <th><i class="bi bi-display"></i> Movie Type</th>
                                <th><i class="bi bi-translate"></i> Language</th>
                                <th><i class="bi bi-clock"></i> Show Time</th>
                            </tr>
                            </thead>
                            <tbody id="advancedMoviesTableBody">
                            <tr>
                                <td colspan="7" class="text-center text-muted">
                                    <i class="bi bi-inbox"></i> No movies added yet
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>

<script>
    // Problem 1: Simple Movies Implementation
    let simpleMovies = [];

    function addSimpleMovie() {
        const name = document.getElementById('simpleMovieName').value.trim();
        const price = document.getElementById('simpleMoviePrice').value.trim();
        const seat = document.getElementById('simpleMovieSeat').value.trim();

        // Validation
        if (!name || !price || !seat) {
            showAlert('Please fill in all fields!', 'warning');
            return;
        }

        if (isNaN(price) || parseFloat(price) < 0) {
            showAlert('Please enter a valid price!', 'danger');
            return;
        }

        // Add movie
        const movie = {
            name: name,
            price: parseFloat(price).toFixed(2),
            seat: seat
        };

        simpleMovies.push(movie);

        // Clear inputs
        document.getElementById('simpleMovieName').value = '';
        document.getElementById('simpleMoviePrice').value = '';
        document.getElementById('simpleMovieSeat').value = '';

        // Update table
        updateSimpleMoviesTable();
        showAlert('Movie added successfully!', 'success');

        // Focus on first input
        document.getElementById('simpleMovieName').focus();
    }

    function addThreeSimpleMovies() {
        const movies = [];

        for (let i = 1; i <= 3; i++) {
            const name = prompt(`Enter Movie Name for Movie ${i}:`);
            if (!name || name.trim() === '') {
                showAlert('Movie addition cancelled or invalid name entered.', 'warning');
                return;
            }

            const price = prompt(`Enter Price for Movie ${i}:`);
            if (!price || isNaN(price) || parseFloat(price) < 0) {
                showAlert('Movie addition cancelled or invalid price entered.', 'warning');
                return;
            }

            const seat = prompt(`Enter Seat for Movie ${i}:`);
            if (!seat || seat.trim() === '') {
                showAlert('Movie addition cancelled or invalid seat entered.', 'warning');
                return;
            }

            movies.push({
                name: name.trim(),
                price: parseFloat(price).toFixed(2),
                seat: seat.trim()
            });
        }

        simpleMovies.push(...movies);
        updateSimpleMoviesTable();
        showAlert('3 movies added successfully!', 'success');
    }

    function clearSimpleMovies() {
        if (simpleMovies.length === 0) {
            showAlert('Movie list is already empty!', 'info');
            return;
        }

        if (confirm('Are you sure you want to clear all movies?')) {
            simpleMovies = [];
            updateSimpleMoviesTable();
            showAlert('All movies cleared!', 'success');
        }
    }

    function updateSimpleMoviesTable() {
        const tableBody = document.getElementById('simpleMoviesTableBody');
        tableBody.innerHTML = '';

        if (simpleMovies.length === 0) {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td colspan="4" class="text-center text-muted">
                    <i class="bi bi-inbox"></i> No movies added yet
                </td>
            `;
            tableBody.appendChild(row);
            return;
        }

        simpleMovies.forEach((movie, index) => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td><span class="badge bg-primary">${index + 1}</span></td>
                <td><strong>${movie.name}</strong></td>
                <td><span class="text-success fw-bold">${movie.price}</span></td>
                <td><span class="badge bg-info">${movie.seat}</span></td>
            `;
            tableBody.appendChild(row);
        });
    }

    // Problem 2: Advanced Movies Implementation (Compulsory)
    let advancedMovies = [];

    // Submit Event Handler
    document.getElementById('advancedMovieForm').addEventListener('submit', function(event) {
        event.preventDefault(); // Prevent form submission

        // Custom validation for checkboxes
        const movieTypeCheckboxes = document.querySelectorAll('.movie-type-checkbox');
        const isAnyTypeChecked = Array.from(movieTypeCheckboxes).some(checkbox => checkbox.checked);

        if (!isAnyTypeChecked) {
            document.getElementById('movieTypeError').style.display = 'block';
            showAlert('Please select at least one movie type!', 'danger');
            return;
        } else {
            document.getElementById('movieTypeError').style.display = 'none';
        }

        // If form is valid, add the movie
        if (this.checkValidity()) {
            addAdvancedMovieFromForm();
            showAlert('Movie submitted successfully via SUBMIT EVENT!', 'success');
        } else {
            this.classList.add('was-validated');
            showAlert('Please fill in all required fields correctly!', 'danger');
        }
    });

    // Click Event Handler
    function addAdvancedMovie() {
        // Get form element
        const form = document.getElementById('advancedMovieForm');

        // Custom validation for checkboxes
        const movieTypeCheckboxes = document.querySelectorAll('.movie-type-checkbox');
        const isAnyTypeChecked = Array.from(movieTypeCheckboxes).some(checkbox => checkbox.checked);

        if (!isAnyTypeChecked) {
            document.getElementById('movieTypeError').style.display = 'block';
            showAlert('Please select at least one movie type!', 'danger');
            return;
        } else {
            document.getElementById('movieTypeError').style.display = 'none';
        }

        // Validate form
        if (form.checkValidity()) {
            addAdvancedMovieFromForm();
            showAlert('Movie added successfully via CLICK EVENT!', 'primary');
        } else {
            form.classList.add('was-validated');
            showAlert('Please fill in all required fields correctly!', 'danger');
        }
    }

    function addAdvancedMovieFromForm() {
        // Get form values
        const name = document.getElementById('advancedMovieName').value.trim();
        const actor = document.getElementById('advancedMovieActor').value.trim();
        const release = document.getElementById('advancedMovieRelease').value;
        const showtime = document.getElementById('advancedMovieShowtime').value;

        // Get selected movie types
        const movieTypes = [];
        document.querySelectorAll('.movie-type-checkbox:checked').forEach(checkbox => {
            movieTypes.push(checkbox.value);
        });

        // Get selected language
        const language = document.querySelector('input[name="language"]:checked').value;

        // Create movie object
        const movie = {
            name: name,
            actor: actor,
            release: release,
            movieTypes: movieTypes,
            language: language,
            showtime: showtime
        };

        // Add to array
        advancedMovies.push(movie);

        // Update table
        updateAdvancedMoviesTable();

        // Reset form
        resetAdvancedForm();
    }

    function resetAdvancedForm() {
        const form = document.getElementById('advancedMovieForm');
        form.reset();
        form.classList.remove('was-validated');
        document.getElementById('movieTypeError').style.display = 'none';
    }

    function updateAdvancedMoviesTable() {
        const tableBody = document.getElementById('advancedMoviesTableBody');
        tableBody.innerHTML = '';

        if (advancedMovies.length === 0) {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td colspan="7" class="text-center text-muted">
                    <i class="bi bi-inbox"></i> No movies added yet
                </td>
            `;
            tableBody.appendChild(row);
            return;
        }

        advancedMovies.forEach((movie, index) => {
            const row = document.createElement('tr');

            // Format movie types as badges
            const movieTypeBadges = movie.movieTypes.map(type =>
                `<span class="badge badge-custom me-1">${type}</span>`
            ).join('');

            // Format date and time
            const releaseDate = new Date(movie.release).toLocaleDateString();
            const showDateTime = new Date(movie.showtime).toLocaleString();

            row.innerHTML = `
                <td><span class="badge bg-primary">${index + 1}</span></td>
                <td><strong>${movie.name}</strong></td>
                <td><i class="bi bi-person-fill"></i> ${movie.actor}</td>
                <td><i class="bi bi-calendar-event"></i> ${releaseDate}</td>
                <td class="movie-type-badges">${movieTypeBadges}</td>
                <td><span class="badge bg-secondary">${movie.language}</span></td>
                <td><small><i class="bi bi-clock"></i> ${showDateTime}</small></td>
            `;
            tableBody.appendChild(row);
        });
    }

    // Utility function to show alerts
    function showAlert(message, type) {
        // Remove existing alerts
        const existingAlert = document.querySelector('.alert-custom');
        if (existingAlert) {
            existingAlert.remove();
        }

        // Create new alert
        const alertDiv = document.createElement('div');
        alertDiv.className = `alert alert-${type} alert-dismissible fade show alert-custom`;
        alertDiv.style.position = 'fixed';
        alertDiv.style.top = '20px';
        alertDiv.style.right = '20px';
        alertDiv.style.zIndex = '9999';
        alertDiv.style.minWidth = '300px';

        alertDiv.innerHTML = `
            ${message}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        `;

        document.body.appendChild(alertDiv);

        // Auto remove after 3 seconds
        setTimeout(() => {
            if (alertDiv) {
                alertDiv.remove();
            }
        }, 3000);
    }

    // Initialize tables on page load
    document.addEventListener('DOMContentLoaded', function() {
        updateSimpleMoviesTable();
        updateAdvancedMoviesTable();
    });

    // Add Enter key support for simple movie form
    document.getElementById('simpleMovieSeat').addEventListener('keypress', function(event) {
        if (event.key === 'Enter') {
            addSimpleMovie();
        }
    });
</script>
</body>
</html>